@using System.ComponentModel.DataAnnotations
@using DataAccess.Models
@page "/fruits/create"
@inject IFruitsService FruitService
@inject NavigationManager Navigation

<div class="container mt-5">
    <div class="card shadow-lg border-0 rounded-lg">
        <div class="card-header text-white text-center fw-bold" style="background-color: #3F6C45;">
            <h3>Create Fruit</h3>
        </div>

        <div class="card-body">
            <EditForm Model="Fruit" OnValidSubmit="SaveFruit">
                <DataAnnotationsValidator />
                <ValidationSummary class="text-danger" />

                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label class="form-label"><strong>Name</strong></label>
                        <InputText class="form-control shadow-sm" @bind-Value="Fruit.Name" />
                        <ValidationMessage For="@(() => Fruit.Name)" class="text-danger" />
                    </div>

                    <div class="col-md-12 mb-3">
                        <label class="form-label"><strong>Price</strong></label>
                        <InputNumber class="form-control shadow-sm" @bind-Value="Fruit.Price" step="0.01" min="0.01" />
                        <ValidationMessage For="@(() => Fruit.Price)" class="text-danger" />
                    </div>

                    <div class="col-md-12 mb-3">
                        <label class="form-label"><strong>Quantity</strong></label>
                        <InputNumber class="form-control shadow-sm" @bind-Value="Fruit.Quantity" min="0" />
                        <ValidationMessage For="@(() => Fruit.Quantity)" class="text-danger" />
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                    <button type="submit" class="btn btn-success me-3 px-4">
                        Save
                    </button>
                    <button type="button" class="btn btn-secondary px-4" @onclick="Cancel">
                        Cancel
                    </button>
                </div>
            </EditForm>
        </div>
    </div>
</div>

@code {
    private Fruits Fruit = new();

    private async Task SaveFruit()
    {
        if (string.IsNullOrWhiteSpace(Fruit.Name))
            return;

        await FruitService.AddFruitAsync(Fruit);
        Navigation.NavigateTo("/fruits");
    }

    private void Cancel()
    {
        Navigation.NavigateTo("/fruits");
    }
}
